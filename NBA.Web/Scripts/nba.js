var app = [];
app.data = [];
app.data.mock =
[
    {
        "personId": 1627767,
        "teamId": "12326",
        "firstName": "Cheick",
        "lastName": "Diallo",
        "temporaryDisplayName": "Diallo, Cheick",
        "heightMeters": "2.06",
        "dateOfBirthUTC": "13/09/1996",
        "careerSummary": {
            "fgp": "58.5",
            "ppg": "5.5",
            "rpg": "4.6",
            "apg": "0.4",
            "bpg": "0.5"
        },
        "teamSitesOnly": {
            "posFull": "Forward"
        },
        "team": {
            "teamId": "12326",
            "nickname": "Africa",
            "confName": "",
            "africa": null,
            "config": {
                "primaryColor": "#000000"
            }
        },
        "africa": {
            "nickname": null,
            "confName": null,
            "country": "Mali"
        }
    },
    {
        "personId": 202355,
        "teamId": "12327",
        "firstName": "Hassan",
        "lastName": "Whiteside",
        "temporaryDisplayName": "Whiteside, Hassan",
        "heightMeters": "2.13",
        "dateOfBirthUTC": "13/06/1989",
        "careerSummary": {
            "fgp": "57.4",
            "ppg": "13.4",
            "rpg": "11.4",
            "apg": "0.6",
            "bpg": "2.3"
        },
        "teamSitesOnly": {
            "posFull": "Center"
        },
        "team": {
            "teamId": "12327",
            "nickname": "World",
            "confName": "",
            "africa": null,
            "config": {
                "primaryColor": "#000000"
            }
        },
        "africa": {
            "nickname": null,
            "confName": null,
            "country": "USA"
        }
    },
    {
        "personId": 201580,
        "teamId": "12327",
        "firstName": "JaVale",
        "lastName": "McGee",
        "temporaryDisplayName": "McGee, JaVale",
        "heightMeters": "2.13",
        "dateOfBirthUTC": "19/01/1988",
        "careerSummary": {
            "fgp": "57",
            "ppg": "8",
            "rpg": "5.1",
            "apg": "0.4",
            "bpg": "1.6"
        },
        "teamSitesOnly": {
            "posFull": "Center"
        },
        "team": {
            "teamId": "12327",
            "nickname": "World",
            "confName": "",
            "africa": null,
            "config": {
                "primaryColor": "#000000"
            }
        },
        "africa": {
            "nickname": null,
            "confName": null,
            "country": "USA"
        }
    },
    {
        "personId": 1628381,
        "teamId": "12327",
        "firstName": "John",
        "lastName": "Collins",
        "temporaryDisplayName": "Collins, John",
        "heightMeters": "2.08",
        "dateOfBirthUTC": "23/09/1997",
        "careerSummary": {
            "fgp": "56.6",
            "ppg": "14.6",
            "rpg": "8.4",
            "apg": "1.6",
            "bpg": "0.9"
        },
        "teamSitesOnly": {
            "posFull": "ForwardCenter"
        },
        "team": {
            "teamId": "12327",
            "nickname": "World",
            "confName": "",
            "africa": null,
            "config": {
                "primaryColor": "#000000"
            }
        },
        "africa": {
            "nickname": null,
            "confName": null,
            "country": "USA"
        }
    },
    {
        "personId": 101133,
        "teamId": "12326",
        "firstName": "Ian",
        "lastName": "Mahinmi",
        "temporaryDisplayName": "Mahinmi, Ian",
        "heightMeters": "2.11",
        "dateOfBirthUTC": "05/11/1986",
        "careerSummary": {
            "fgp": "53.7",
            "ppg": "5",
            "rpg": "4.3",
            "apg": "0.5",
            "bpg": "0.7"
        },
        "teamSitesOnly": {
            "posFull": "Center"
        },
        "team": {
            "teamId": "12326",
            "nickname": "Africa",
            "confName": "",
            "africa": null,
            "config": {
                "primaryColor": "#000000"
            }
        },
        "africa": {
            "nickname": null,
            "confName": null,
            "country": "France"
        }
    },
    {
        "personId": 1627783,
        "teamId": "12326",
        "firstName": "Pascal",
        "lastName": "Siakam",
        "temporaryDisplayName": "Siakam, Pascal",
        "heightMeters": "2.06",
        "dateOfBirthUTC": "02/04/1994",
        "careerSummary": {
            "fgp": "53.1",
            "ppg": "10.1",
            "rpg": "5.1",
            "apg": "2",
            "bpg": "0.6"
        },
        "teamSitesOnly": {
            "posFull": "Forward"
        },
        "team": {
            "teamId": "12326",
            "nickname": "Africa",
            "confName": "",
            "africa": null,
            "config": {
                "primaryColor": "#000000"
            }
        },
        "africa": {
            "nickname": null,
            "confName": null,
            "country": "Cameroon"
        }
    },
    {
        "personId": 202687,
        "teamId": "12326",
        "firstName": "Bismack",
        "lastName": "Biyombo",
        "temporaryDisplayName": "Biyombo, Bismack",
        "heightMeters": "2.06",
        "dateOfBirthUTC": "28/08/1992",
        "careerSummary": {
            "fgp": "51.7",
            "ppg": "4.9",
            "rpg": "6.3",
            "apg": "0.5",
            "bpg": "1.4"
        },
        "teamSitesOnly": {
            "posFull": "Center"
        },
        "team": {
            "teamId": "12326",
            "nickname": "Africa",
            "confName": "",
            "africa": null,
            "config": {
                "primaryColor": "#000000"
            }
        },
        "africa": {
            "nickname": null,
            "confName": null,
            "country": "Democratic Republic of the Congo"
        }
    },
    {
        "personId": 201586,
        "teamId": "12326",
        "firstName": "Serge",
        "lastName": "Ibaka",
        "temporaryDisplayName": "Ibaka, Serge",
        "heightMeters": "2.08",
        "dateOfBirthUTC": "18/09/1989",
        "careerSummary": {
            "fgp": "51.4",
            "ppg": "12.3",
            "rpg": "7.3",
            "apg": "0.7",
            "bpg": "2.2"
        },
        "teamSitesOnly": {
            "posFull": "ForwardCenter"
        },
        "team": {
            "teamId": "12326",
            "nickname": "Africa",
            "confName": "",
            "africa": null,
            "config": {
                "primaryColor": "#000000"
            }
        },
        "africa": {
            "nickname": null,
            "confName": null,
            "country": "Democratic Republic of the Congo"
        }
    },
    {
        "personId": 203954,
        "teamId": "12326",
        "firstName": "Joel",
        "lastName": "Embiid",
        "temporaryDisplayName": "Embiid, Joel",
        "heightMeters": "2.13",
        "dateOfBirthUTC": "16/03/1994",
        "careerSummary": {
            "fgp": "48.1",
            "ppg": "24.3",
            "rpg": "11.4",
            "apg": "3.2",
            "bpg": "2"
        },
        "teamSitesOnly": {
            "posFull": "Center"
        },
        "team": {
            "teamId": "12326",
            "nickname": "Africa",
            "confName": "",
            "africa": null,
            "config": {
                "primaryColor": "#000000"
            }
        },
        "africa": {
            "nickname": null,
            "confName": null,
            "country": "Cameroon"
        }
    },
    {
        "personId": 200752,
        "teamId": "12327",
        "firstName": "Rudy",
        "lastName": "Gay",
        "temporaryDisplayName": "Gay, Rudy",
        "heightMeters": "2.03",
        "dateOfBirthUTC": "17/08/1986",
        "careerSummary": {
            "fgp": "45.6",
            "ppg": "17.6",
            "rpg": "5.9",
            "apg": "2.2",
            "bpg": "0.8"
        },
        "teamSitesOnly": {
            "posFull": "Forward"
        },
        "team": {
            "teamId": "12327",
            "nickname": "World",
            "confName": "",
            "africa": null,
            "config": {
                "primaryColor": "#000000"
            }
        },
        "africa": {
            "nickname": null,
            "confName": null,
            "country": "USA"
        }
    }
];


app.consts = [];
app.consts.url = [];
app.consts.url.GetPlayersProfilesTeamsConfigAll = "https://localhost:44388/api/Players/Profiles/Teams/Config/All?year={0}";

app.methods = [];
app.methods.GetData = function GetData(year) {
    $.ajax({
        method: 'GET',
        url: app.consts.url.GetPlayersProfilesTeamsConfigAll.format(year),
        data: {},
        beforeSend: function (xhr) {
            // Empty content div
            $("#content").empty();
            /*$("#content").hide();*/

            // Show loader
            $(".overlay").show();
        },
        success: function (result, status, xhr) {
            app.data = result;
            // Populate results
            var successMessage = '*** Success! ***';
            console.log(successMessage);
            //console.log(app.data);
            //console.log(successMessage);
            /*$("#content").show();*/
            app.methods.RenderDataWithInnerHTML(app.data);

            // Hide loader.
            $(".overlay").hide();
        },
        error: function (xhr, status, error) {
            var errorText = 'Error statusText: ' + xhr.statusText;
            console.log(errorText);
            alert(errorText);
            // Hide loader.
            $(".overlay").hide();
        },
        complete: function (xhr, status) {
            var completeMessage = 'Complete!';
            console.log(completeMessage);
            /*alert(completeMessage);*/

            // Hide loader.
            $(".overlay").hide();
        }
    });
};

app.methods.RenderDataWithInnerHTML = function RenderDataWithInnerHTML(data) {
    const contentDiv = document.getElementById("content");
    const rows = data.map(player => {
        return `<div class="v5_3">
                <div class="v5_4"></div>
                <div class="v5_5"></div>
                <span class="v5_6 fullname">${player.firstName} ${player.lastName}</span>
                <span class="v5_7 height">(${player.heightMeters})</span>
                <span class="v5_8 posFull">${player.teamSitesOnly.posFull}</span>
                <span class="v5_9 nickname">${player.team.nickname}</span>
                <span class="v5_10 confName">${player.team.confName}</span>
                <span class="v5_11 country">${player.africa.country}</span>
                <span class="v5_12 dateOfBirthUTC">${player.dateOfBirthUTC}</span>
                <div class="v5_13"></div>
            </div>
            <div class="v0_126"></div>`;
    });
    const html = rows.join();
    /*console.log(html);*/
    contentDiv.innerHTML = html;
};

// Passing a named function instead of an anonymous function.
function readyFn(jQuery) {
    // Code to run when the document is ready.    
    /*$("#divBtnApply").click(() => { alert("#divBtnApply" + " click!") });*/
    $("#divBtnApply").click(() => {
        if ($("#year").val() == '') {
            return;
        }
        var year = $("#year").val();
        app.methods.GetData(year);
    });

    $(".overlay").hide();
}


$(document).ready(readyFn);